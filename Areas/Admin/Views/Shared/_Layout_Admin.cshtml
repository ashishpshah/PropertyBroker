@{
	List<UserMenuAccess> listRoleMenuAccess = Common.GetUserMenuAccesses();
}

<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>@ViewData["Title"] - Broker</title>

	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
	<link href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet">

	<!-- App favicon -->
	<link rel="shortcut icon" href="~/assets/images/favicon.ico">

	<link href="~/assets/vendor/sweetalert2/sweetalert2.min.css" rel="stylesheet" />
	<link href="~/assets/vendor/select2/css/select2.min.css" rel="stylesheet" />

	<!-- Datatables css -->
	<link href="~/assets/vendor/datatables.net-bs5/css/dataTables.bootstrap5.min.css" rel="stylesheet" type="text/css" />
	<link href="~/assets/vendor/datatables.net-responsive-bs5/css/responsive.bootstrap5.min.css" rel="stylesheet" type="text/css" />
	<link href="~/assets/vendor/datatables.net-fixedcolumns-bs5/css/fixedColumns.bootstrap5.min.css" rel="stylesheet" type="text/css" />
	<link href="~/assets/vendor/datatables.net-fixedheader-bs5/css/fixedHeader.bootstrap5.min.css" rel="stylesheet" type="text/css" />
	<link href="~/assets/vendor/datatables.net-buttons-bs5/css/buttons.bootstrap5.min.css" rel="stylesheet" type="text/css" />
	<link href="~/assets/vendor/datatables.net-select-bs5/css/select.bootstrap5.min.css" rel="stylesheet" type="text/css" />
	<link href="~/assets/vendor/datatables.net-select-bs5/css/select.bootstrap5.min.css" rel="stylesheet" type="text/css" />

	<!-- Theme Config Js -->
	<script src="~/assets/js/config.js"></script>
	<!-- App css -->
	<link href="~/assets/css/app.min.css" rel="stylesheet" type="text/css" id="app-style" />

	<!-- Icons css -->
	<link href="~/assets/css/icons.min.css" rel="stylesheet" type="text/css" />

	<style type="text/css">
		/* .table > :not(caption) > * > * {
																			padding: .35rem 0.95rem !important;
																		} */

		.input-group-text-sm {
			min-height: calc(1.5em + .56rem + calc(var(--tz-border-width) * 2));
			padding: .28rem .8rem;
			font-size: .85rem;
			border-radius: .25rem;
		}

		.select2-results__option--selected {
			background-color: var(--tz-primary-bg-subtle) !important;
		}

		.select2-container {
			width: 100% !important;
		}

		.bg-green {
			background-color: #007D39 !important;
		}

		[class*=sidebar-dark-] .sidebar a {
			color: #007D39 !important;
		}

		.nav-pills .nav-link.active, .nav-pills .show > .nav-link {
			background-color: lightgray !important;
		}

		.navbar-light .navbar-nav .nav-link {
			color: #fff !important;
		}

		[class*=sidebar-dark] .brand-link {
			border-bottom: 0 !important;
			color: rgba(255,255,255,.8);
		}

		.elevation-4 {
			box-shadow: none !important;
		}

		.panel-divider {
			text-align: left;
			border: 1px solid #979faf;
			line-height: 0.1em;
			margin-bottom: 1.5rem !important;
			border-radius: 0.25rem
		}

			.panel-divider > span {
				background: #fff;
				padding: 0 1rem;
				margin-left: 1rem !important;
				font-size: 1.25rem;
				font-weight: bold;
			}

			.panel-divider > div.row {
				margin: 1rem 2rem 0rem 2rem !important;
			}

			.panel-divider table td {
				line-height: normal !important;
			}

		/* @@media (min-width: 576px) {
																																			.form-group.row > .text-right {
																																				text-align: left !important;
																																			}
																																		} */
	</style>

	<link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />

	@await RenderSectionAsync("Styles", required: false)

	<link rel="stylesheet" href="~/Broker.styles.css" asp-append-version="true" />
</head>
<body>
	<!-- Begin page -->
	<div class="wrapper">


		<!-- ========== Topbar Start ========== -->
		<div class="navbar-custom">
			<div class="topbar container-fluid">
				<div class="d-flex align-items-center gap-1">

					<!-- Topbar Brand Logo -->
					<div class="logo-topbar">
						<!-- Logo light -->
						<a href="@Url.Action("Index", "Home", new { area = "Admin" })" class="logo-light">
							<span class="logo-lg">
								<img src="~/images/logo-dark-2.png" alt="logo">
							</span>
							<span class="logo-sm">
								<img src="~/images/logo-dark-2.png" alt="logo">
							</span>
						</a>

						<!-- Logo Dark -->
						<a href="@Url.Action("Index", "Home", new { area = "Admin" })" class="logo-dark">
							<span class="logo-lg">
								<img src="~/images/logo-dark-2.png" alt="logo">
							</span>
							<span class="logo-sm">
								<img src="~/images/logo-dark-2.png" alt="logo">
							</span>
						</a>
					</div>

					<!-- Sidebar Menu Toggle Button -->
					<button class="button-toggle-menu">
						<i class="ri-menu-line"></i>
					</button>

					<!-- Horizontal Menu Toggle Button -->
					<button class="navbar-toggle" data-bs-toggle="collapse" data-bs-target="#topnav-menu-content">
						<div class="lines">
							<span></span>
							<span></span>
							<span></span>
						</div>
					</button>

				</div>

				<ul class="topbar-menu d-flex align-items-center gap-3">

					<li class="dropdown">
						<a class="nav-link dropdown-toggle arrow-none nav-user" data-bs-toggle="dropdown" href="#" role="button"
						   aria-haspopup="false" aria-expanded="false">

							<span class="d-lg-block d-none">
								<h5 class="my-0 fw-normal">@Common.Get_Session(SessionKey.KEY_USER_NAME)  <i class="ri-arrow-down-s-line d-none d-sm-inline-block align-middle"></i></h5>
							</span>
						</a>
						<div class="dropdown-menu dropdown-menu-end dropdown-menu-animated profile-dropdown">
							<!-- item-->
							<div class=" dropdown-header noti-title">
								<h6 class="text-overflow m-0">Welcome !</h6>
							</div>
							@*
							<!-- item-->
							<a href="pages-profile.html" class="dropdown-item">
							<i class="ri-account-circle-line fs-18 align-middle me-1"></i>
							<span>My Account</span>
							</a>

							<!-- item-->
							<a href="pages-profile.html" class="dropdown-item">
							<i class="ri-settings-4-line fs-18 align-middle me-1"></i>
							<span>Settings</span>
							</a>

							<!-- item-->
							<a href="pages-faq.html" class="dropdown-item">
							<i class="ri-customer-service-2-line fs-18 align-middle me-1"></i>
							<span>Support</span>
							</a>

							<!-- item-->
							<a href="auth-lock-screen.html" class="dropdown-item">
							<i class="ri-lock-password-line fs-18 align-middle me-1"></i>
							<span>Lock Screen</span>
							</a>
							*@
							<!-- item-->
							<a href="@Url.Action("Logout", "Home", new { area = "Admin" })" class="dropdown-item">
								<i class="ri-logout-box-line fs-18 align-middle me-1"></i>
								<span>Logout</span>
							</a>
						</div>
					</li>
				</ul>
			</div>
		</div>
		<!-- ========== Topbar End ========== -->
		<!-- ========== Left Sidebar Start ========== -->
		<div class="leftside-menu">

			<!-- Brand Logo Light -->
			<a href="@Url.Action("Index", "Home", new { area = "Admin" })" class="logo-light">
				<span class="logo-lg">
					<img src="~/images/logo-dark-2.png" alt="logo" style="height:74.5px;">
				</span>				
			</a>

			<!-- Logo Dark -->
		
			<!-- Sidebar -left -->
			<div class="h-100" id="leftside-menu-container" data-simplebar>
				<!--- Sidemenu -->
				<ul class="side-nav">

					<li class="side-nav-item">
						<a href="@Url.Action("Index", "Home", new { area = "Admin" })" class="side-nav-link">
							<i class="ri-dashboard-3-line"></i>
							<span> Dashboard </span>
						</a>
					</li>

					@if (listRoleMenuAccess != null && listRoleMenuAccess.Count > 0)
					{
						var grouby = listRoleMenuAccess.Where(x => x.ParentMenuId > 0).GroupBy(x => x.ParentMenuId).Select(x => x.Key).ToList();

						var parentMenus = listRoleMenuAccess.Where(x => grouby.Any(y => y == x.Id)).ToList();

						var childMenus = listRoleMenuAccess.Where(x => parentMenus.Any(y => y.Id == x.ParentMenuId)).ToList();

						parentMenus.AddRange(listRoleMenuAccess.Where(x => !parentMenus.Any(z => z.Id == x.Id) && !childMenus.Any(z => z.Id == x.Id)).ToList());

						var i = 0;
						foreach (var menu in parentMenus.OrderBy(x => x.DisplayOrder))
						{
							<li class="side-nav-item">

								@if (!listRoleMenuAccess.Any(x => x.ParentMenuId == menu.Id) && (!string.IsNullOrEmpty(menu.Url) || !string.IsNullOrEmpty(menu.Controller)))
								{
									if (string.IsNullOrEmpty(menu.Url))
									{
										<a href="@(string.IsNullOrEmpty(menu.Area) ? "" : "/" + menu.Area)/@menu.Controller/Index" class="side-nav-link">
											<i class="ri-dashboard-3-line"></i>
											<span> @menu.MenuName </span>
										</a>
									}
									else
									{
										<a href="@(Url.Content("~/") + menu.Url)" class="side-nav-link">
											<i class="ri-dashboard-3-line"></i>
											<span> @menu.MenuName </span>
										</a>
									}
								}
								else
								{
									<a data-bs-toggle="collapse" href="#sidebarPages_@(menu.Id)" class="side-nav-link" aria-expanded="false" aria-controls="sidebarPages_@(menu.Id)">
										<i class="ri-pages-line"></i>
										<span> @menu.MenuName </span>
										<span class="menu-arrow"></span>
									</a>

									<div class="collapse" id="sidebarPages_@(menu.Id)">
										<ul class="side-nav-second-level">

											@foreach (var item in childMenus.Where(x => x.ParentMenuId == menu.Id).ToList())
											{
												<li>
													<a href="@(string.IsNullOrEmpty(item.Url) ? string.IsNullOrEmpty(item.Area) ? "" : "/" + item.Area + "/" + item.Controller + "/Index" : Url.Content("~/") + item.Url)"> @item.MenuName </a>
												</li>
											}
										</ul>
									</div>
								}
							</li>

							i++;
						}
					}

				</ul>
				<!--- End Sidemenu -->

				<div class="clearfix"></div>
			</div>
		</div>
		<!-- ========== Left Sidebar End ========== -->
		<!-- ============================================================== -->
		<!-- Start Page Content here -->
		<!-- ============================================================== -->

		<div class="content-page">
			<div class="content">

				<!-- Start Content-->
				<div class="container-fluid">




					@RenderBody()
					<hr />

					<!-- Modal -->
					<div class="modal fade" id="largeModal" data-bs-backdrop="static" data-bs-keyboard="false" aria-labelledby="largeModalLabel" aria-hidden="true">
						<div class="modal-dialog modal-lg">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="largeModalLabel">Modal title</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body"> </div>
								<div class="modal-body-embed" style="display:none;"> </div>
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary modal-btn-close" data-bs-dismiss="modal">Close</button>
									<button type="button" class="btn btn-success modal-btn-save btnSubmit">Save</button>
								</div>
							</div>
						</div>
					</div>
				</div> <!-- container -->

			</div> <!-- content -->
			<!-- Footer Start -->
			<footer class="footer">
				<div class="container-fluid">
					<div class="row">
						<div class="col-12 text-center">
							<script>document.write(new Date().getFullYear())</script> © <b>Property Broker</b>
						</div>
					</div>
				</div>
			</footer>
			<!-- end Footer -->

		</div>

		<!-- ============================================================== -->
		<!-- End Page content -->
		<!-- ============================================================== -->

	</div>
	<!-- END wrapper -->
	<!-- Vendor js -->
	<script src="~/assets/js/vendor.min.js"></script>

	<script src="~/assets/vendor/sweetalert2/sweetalert2.min.js"></script>
	<script src="~/assets/vendor/select2/js/select2.min.js"></script>

	<!-- Datatables js -->
	<script src="~/assets/vendor/datatables.net/js/jquery.dataTables.min.js"></script>
	<script src="~/assets/vendor/datatables.net-bs5/js/dataTables.bootstrap5.min.js"></script>
	<script src="~/assets/vendor/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
	<script src="~/assets/vendor/datatables.net-responsive-bs5/js/responsive.bootstrap5.min.js"></script>
	<script src="~/assets/vendor/datatables.net-fixedcolumns-bs5/js/fixedColumns.bootstrap5.min.js"></script>
	<script src="~/assets/vendor/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
	<script src="~/assets/vendor/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
	<script src="~/assets/vendor/datatables.net-buttons-bs5/js/buttons.bootstrap5.min.js"></script>
	<script src="~/assets/vendor/datatables.net-buttons/js/buttons.html5.min.js"></script>
	<script src="~/assets/vendor/datatables.net-buttons/js/buttons.flash.min.js"></script>
	<script src="~/assets/vendor/datatables.net-buttons/js/buttons.print.min.js"></script>
	<script src="~/assets/vendor/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
	<script src="~/assets/vendor/datatables.net-select/js/dataTables.select.min.js"></script>

	<!-- App js -->
	<script src="~/assets/js/app.js"></script>

	<script src="~/common.js"></script>

	<script src="~/js/site.js" asp-append-version="true"></script>
	@await RenderSectionAsync("Scripts", required: false)
</body>
</html>
