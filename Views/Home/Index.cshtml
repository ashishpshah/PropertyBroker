@model ResponseModel<LoginViewModel>
@{
	ViewData["Title"] = "Home Page";
}


<section class="position-relative mt-5 pt-4">
	<div class="container-fluid px-md-4 px-2 mt-2">
		<div class="bg-home-one d-table w-100 shadow rounded-3 overflow-hidden" id="home">
			<div class="bg-overlay image-wrap" id="hero-images"></div>
			<div class="bg-overlay bg-black opacity-50"></div>

			<div class="container">
				<div class="row justify-content-center">
					<div class="col-12">
						<div class="title-heading">
							<h4 class="heading fw-bold text-white title-dark mb-3">We will help you find <br> your <span class="typewrite text-primary" data-period="2000" data-type='[ "Wonderful", "Dream" ]'></span> home</h4>
							<p class="para-desc text-white title-dark mb-0">A great plateform to buy, sell and rent your properties without any agent or commisions.</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

<section class="section pt-5">
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-12 mt-sm-0 pt-sm-0">
				<div class="features-absolute">
					<ul class="nav nav-pills bg-white shadow border-bottom p-3 flex-row d-md-inline-flex nav-justified mb-0 rounded-top-3 position-relative overflow-hidden" id="pills-tab" role="tablist">
						<li class="nav-item m-1">
							<a class="nav-link py-2 px-4 active rounded-3 fw-medium" id="buy-login" data-bs-toggle="pill" href="#buy" role="tab" aria-controls="buy" aria-selected="false">
								Buy
							</a>
						</li>

						<li class="nav-item m-1">
							<a class="nav-link py-2 px-4 rounded-3 fw-medium" id="rent-login" data-bs-toggle="pill" href="#rent" role="tab" aria-controls="rent" aria-selected="false">
								Rent
							</a>
						</li>
					</ul>

					<div class="bg-white rounded-bottom-3 rounded-end-3 sm-rounded-0 shadow">
						<div class="card border-0">
							<form class="card-body text-start">
								<div class="registration-form text-dark text-start">
									<div class="row g-lg-0">
										<div class="col-lg-3 col-md-6 col-12">
											<div class="mb-3 text-start">
												<label class="form-label fs-6">Location</label>
												<div class="filter-search-form position-relative filter-border">
													<i data-feather="location" class="fea icon-ex-md icons"></i>
													<select class="form-select choices-select" id="choices-location">
														@if (Model.SelectListItems != null)
														{
															foreach (var item in Model.SelectListItems.Where(x => x.Group == "L"))
															{
																<option value="@item.Value">@item.Text</option>
															}
														}
													</select>
												</div>
											</div>
										</div>

										<div class="col-lg-3 col-md-6 col-12">
											<div class="mb-3 text-start">
												<label class="form-label fs-6">Category</label>
												<div class="filter-search-form position-relative filter-border">
													<i data-feather="home" class="fea icon-ex-md icons"></i>
													<select class="form-select choices-select" id="choices-PropertyCategory">
														@if (Model.SelectListItems != null)
														{
															foreach (var item in Model.SelectListItems.Where(x => x.Group == "PC"))
															{
																<option value="@item.Value">@item.Text</option>
															}
														}
													</select>
												</div>
											</div>
										</div>

										<div class="col-lg-3 col-md-6 col-12">
											<div class="mb-3 text-start">
												<label class="form-label fs-6">&nbsp;</label>
												<div class="filter-search-form position-relative filter-border">
													<select class="form-select choices-select" id="choices-PropertyType_Parent">
														@if (Model.SelectListItems != null)
														{
															foreach (var item in Model.SelectListItems.Where(x => x.Group == "PT" && int.TryParse(x.Value2, out var z) && z <= 0))
															{
																<option value="@item.Value">@item.Text</option>
															}
														}
													</select>
												</div>
											</div>
										</div>

										<div class="col-lg-3 col-md-6 col-12">
											<div class="mb-3 text-start">
												<label class="form-label fs-6">&nbsp;</label>
												<div class="filter-search-form position-relative">
													<select class="form-select choices-select" id="choices-PropertyType">
														@if (Model.SelectListItems != null)
														{
															foreach (var item in Model.SelectListItems.Where(x => x.Group == "PT" && int.TryParse(x.Value2, out var z) && z > 0))
															{
																<option value="@item.Value" data-parent="@item.Value2">@item.Text</option>
															}
														}
													</select>
												</div>
											</div>
										</div>

										<div class="col-lg-3 col-md-6 col-12">
											@* <input type="submit" id="search" name="search" style="height: 48px;" class="btn btn-primary searchbtn w-100" value="Search"> *@
											@* <a href="@Url.Action("Features", "Home", new { area = "" })" class="btn btn-primary searchbtn w-100">Search</a> *@
											<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModalCenteredScrollable">Search</button>
										</div>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="container mt-100 mt-60">
		<div class="row align-items-center">
			<div class="col-lg-6 col-md-6">
				<div class="row g-3 align-items-center">
					<div class="col-lg-7 col-6">
						<img src="images/hero.jpg" class="img-fluid rounded-3" alt="work-image">
					</div>

					<div class="col-lg-5 col-6">
						<div class="row g-3">
							<div class="col-lg-12 col-md-12">
								<img src="images/1.jpg" class="img-fluid rounded-3" alt="work-image">
							</div>

							<div class="col-lg-12 col-md-12">
								<img src="images/logo-icon.png" class="img-fluid" alt="work-image">
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="col-lg-6 col-md-6 mt-4 mt-sm-0 pt-2 pt-sm-0">
				<div class="section-title ms-lg-5">
					<h6 class="text-primary fw-medium mb-2">Our story: Towntor</h6>
					<h4 class="title mb-3">Efficiency. <br> Transparency. Control.</h4>
					<p class="text-muted para-desc mb-0">Towntor developed a platform for the Real Estate marketplace that allows buyers and sellers to easily execute a transaction on their own. The platform drives efficiency, cost transparency and control into the hands of the consumers. Towntor is Real Estate Redefined.</p>

					<div class="mt-4">
						<a href="aboutus.html" class="btn btn-pills btn-primary">Read More <i class="mdi mdi-arrow-right align-middle"></i></a>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="container mt-100 mt-60">
		<div class="row justify-content-center">
			<div class="col">
				<div class="section-title mb-4 pb-2">
					<h4 class="title mb-3">Listing Categories</h4>
					<p class="text-muted para-desc mb-0">A great plateform to buy, sell and rent your properties without any agent or commisions.</p>
				</div>
			</div>
		</div>

		<div class="row row-cols-lg-5 row-cols-md-3 row-cols-sm-2 row-cols-1 g-4 mt-0">
			<div class="col">
				<div class="categories position-relative overflow-hidden rounded-3 shadow">
					<img src="images/property/residential.jpg" class="img-fluid" alt="">

					<div class="p-3">
						<a href="" class="title text-dark fs-5 fw-medium">Residential</a>
						<p class="text-muted small mb-0">46 Listings</p>
					</div>
				</div>
			</div>

			<div class="col">
				<div class="categories position-relative overflow-hidden rounded-3 shadow">
					<img src="images/property/land.jpg" class="img-fluid" alt="">

					<div class="p-3">
						<a href="" class="title text-dark fs-5 fw-medium">Land</a>
						<p class="text-muted small mb-0">124 Listings</p>
					</div>
				</div>
			</div>

			<div class="col">
				<div class="categories position-relative overflow-hidden rounded-3 shadow">
					<img src="images/property/commercial.jpg" class="img-fluid" alt="">

					<div class="p-3">
						<a href="" class="title text-dark fs-5 fw-medium">Commercial</a>
						<p class="text-muted small mb-0">265 Listings</p>
					</div>
				</div>
			</div>

			<div class="col">
				<div class="categories position-relative overflow-hidden rounded-3 shadow">
					<img src="images/property/industrial.jpg" class="img-fluid" alt="">

					<div class="p-3">
						<a href="" class="title text-dark fs-5 fw-medium">Industrial</a>
						<p class="text-muted small mb-0">452 Listings</p>
					</div>
				</div>
			</div>

			<div class="col">
				<div class="categories position-relative overflow-hidden rounded-3 shadow">
					<img src="images/property/investment.jpg" class="img-fluid" alt="">

					<div class="p-3">
						<a href="" class="title text-dark fs-5 fw-medium">Investment</a>
						<p class="text-muted small mb-0">12 Listings</p>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="container mt-100 mt-60">
		<div class="row justify-content-center">
			<div class="col">
				<div class="section-title text-center mb-4 pb-2">
					<h4 class="title mb-3">How It Works</h4>
					<p class="text-muted para-desc mb-0 mx-auto">A great plateform to buy, sell and rent your properties without any agent or commisions.</p>
				</div>
			</div>
		</div>

		<div class="row g-4 mt-0">
			<div class="col-md-4">
				<div class="position-relative features text-center mx-lg-4 px-md-1">
					<div class="feature-icon position-relative overflow-hidden d-flex justify-content-center">
						<i data-feather="hexagon" class="hexagon"></i>
						<div class="position-absolute top-50 start-50 translate-middle">
							<i data-feather="home" class="fea icon-m-md text-primary"></i>
						</div>
					</div>

					<div class="mt-4">
						<a href="" class="fw-medium title text-dark fs-5">Evaluate Property</a>
						<p class="text-muted mt-3 mb-0">If the distribution of letters and 'words' is random, the reader will not be distracted from making.</p>
					</div>
				</div>
			</div>

			<div class="col-md-4">
				<div class="position-relative features text-center mx-lg-4 px-md-1">
					<div class="feature-icon position-relative overflow-hidden d-flex justify-content-center">
						<i data-feather="hexagon" class="hexagon"></i>
						<div class="position-absolute top-50 start-50 translate-middle">
							<i data-feather="briefcase" class="fea icon-m-md text-primary"></i>
						</div>
					</div>

					<div class="mt-4">
						<a href="" class="fw-medium title text-dark fs-5">Meeting with Agent</a>
						<p class="text-muted mt-3 mb-0">If the distribution of letters and 'words' is random, the reader will not be distracted from making.</p>
					</div>
				</div>
			</div>

			<div class="col-md-4">
				<div class="position-relative features text-center mx-lg-4 px-md-1">
					<div class="feature-icon position-relative overflow-hidden d-flex justify-content-center">
						<i data-feather="hexagon" class="hexagon"></i>
						<div class="position-absolute top-50 start-50 translate-middle">
							<i data-feather="key" class="fea icon-m-md text-primary"></i>
						</div>
					</div>

					<div class="mt-4">
						<a href="" class="fw-medium title text-dark fs-5">Close the Deal</a>
						<p class="text-muted mt-3 mb-0">If the distribution of letters and 'words' is random, the reader will not be distracted from making.</p>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="container mt-100 mt-60">
		<div class="row justify-content-center">
			<div class="col-12">
				<div class="section-title text-center">
					<h4 class="title mb-3">Have Question ? Get in touch!</h4>
					<p class="text-muted para-desc mb-0 mx-auto">A great plateform to buy, sell and rent your properties without any agent or commisions.</p>
					<div class="mt-4 pt-2">
						<a href="contactus.html" class="btn btn-pills btn-primary"><span class="h5 mb-0 me-1"><i data-feather="mail" class="fea icon-sm"></i></span> Contact us</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</section><!--end section-->
<!-- End -->

<div class="modal fade" id="exampleModalCenteredScrollable" tabindex="-1" aria-labelledby="exampleModalCenteredScrollableTitle" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
		<div class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="exampleModalCenteredScrollableTitle">Modal title</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<form id="formUserData" action="@Url.Action("Search", "Home", new { area = "" })" class="needs-validation" novalidate="">
					<div class="row g-3">
						<div class="col-sm-6">
							<label for="firstName" class="form-label">First name</label>
							<input type="text" class="form-control" name="FirstName" id="firstName" data-required data-msg="Please enter First name">
						</div>
						<div class="col-sm-6">
							<label for="lastName" class="form-label">Last name</label>
							<input type="text" class="form-control" name="LastName" id="lastName" data-required data-msg="Please enter Last name">
						</div>
						<div class="col-12">
							<label for="email" class="form-label">Email <span class="text-body-secondary">(Optional)</span></label>
							<input type="email" class="form-control" name="Email" id="email" placeholder="you@example.com" data-required data-msg="Please enter Email">
						</div>
						<div class="col-12">
							<label for="ContactNo" class="form-label">Contact No.</label>
							<input type="text" class="form-control isNumberKey" name="ContactNo" id="ContactNo" maxlength="11" data-required data-msg="Please enter Contact No.">
						</div>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary" onclick="fnSubmitFormHere('formUserData')">Submit</button>
			</div>
		</div>
	</div>
</div>


@section Scripts {
	<script type="text/javascript">

				function fnSubmitFormHere($id){
					//ShowLoader(true);

					var $form = $('#' + $id);

						let formData = new FormData();

						let array = $form.serializeArray();

						$.each(array, function (key, input) {
							if (typeof input.name != 'undefined' && input.name != null && input.name.length > 0 && input.name != "__RequestVerificationToken")
								formData.append(input.name, input.value);
						});
						debugger;
						formData.append("Location", $('#choices-location option:selected').val());
						formData.append("PropertyCategory", $('#choices-PropertyCategory option:selected').val());
						formData.append("PropertyType", $('#choices-PropertyType option:selected').val());

						$.ajax({
							type: 'POST',
							url: $form.attr('action'),
							data: formData,
							cache: false,
							contentType: false,
							processData: false,
							dataType: "json",
							success: function (response) {
								debugger;
								try {
									//ShowLoader(false);
									if (response.StatusCode === 1) {
										if (typeof response.IsConfirm != 'undefined' && response.IsConfirm != '' && response.IsConfirm != null && response.IsConfirm == true)
											if (typeof response.Data5 != 'undefined' && response.Data5 != '' && response.Data5 != null)
												if (typeof response.RedirectURL != 'undefined' && response.RedirectURL != '' && response.RedirectURL != null)
													CommonConfirmed_Success_Print(response.Message, response.Data5, response.RedirectURL, null);
												else
													CommonConfirmed_Success_Print(response.Message, response.Data5, fnSubmitForm_Success, [response]);
											else
												if (typeof response.RedirectURL != 'undefined' && response.RedirectURL != '' && response.RedirectURL != null)
													CommonConfirmed_Success(response.Message, response.RedirectURL, null);
												else
													CommonConfirmed_Success(response.Message, fnSubmitForm_Success, [response, $id]);
										else
											if (typeof response.RedirectURL != 'undefined' && response.RedirectURL != '' && response.RedirectURL != null)
												window.location = response.RedirectURL;
											else try { fnSubmitForm_Success(response, $id); } catch { }

									}
									else {
										CommonAlert_Error(response.Message, null)
									}
								} catch {
									window.location.reload();
								}
							},
							//xhr: function () {
							//    var fileXhr = $.ajaxSettings.xhr();
							//    if (fileXhr.upload) {
							//        $("progress").show();
							//        fileXhr.upload.addEventListener("progress", function (e) {
							//            if (e.lengthComputable) {
							//                $("#fileProgress").attr({
							//                    value: e.loaded,
							//                    max: e.total
							//                });
							//            }
							//        }, false);
							//    }
							//    return fileXhr;
							//},
							failure: function (response) { ShowLoader(false); CommonAlert_Error(null) },
							error: function (response) { ShowLoader(false); CommonAlert_Error(null) }
						});

				}

		let childChoices;

		document.querySelectorAll('.choices-select:not([data-choices-init])')
		  .forEach(el => {
			new Choices(el, {
			  searchEnabled: true,
			  removeItemButton: true,
			});
			el.setAttribute('data-choices-init', 'true');
		  });

		const childSelect = document.getElementById('choices-PropertyType');
		const originalOptions = Array.from(childSelect.options).map(o =>
		  o.cloneNode(true)
		);

		document
		  .getElementById('choices-PropertyType_Parent')
		  .addEventListener('change', function () {
			const selectedParent = this.value;

			// Destroy existing Choices instance safely
			if (childChoices) {
			  childChoices.destroy();
			  childChoices = null;
			}

			// Reset options
			childSelect.innerHTML = '';

			originalOptions
			  .filter(o => o.dataset.parent === selectedParent)
			  .forEach(o => childSelect.appendChild(o.cloneNode(true)));

			// Re-initialize Choices
			childChoices = new Choices(childSelect, {
			  shouldSort: false,
			  searchEnabled: true,
			  removeItemButton: true,
			});

			// Clear selection properly
			childChoices.removeActiveItems();
		  });
	</script>
}